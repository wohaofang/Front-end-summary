### 普通函数和箭头函数的区别：

- 箭头函数没有prototype(原型)，所以箭头函数本身没有this
- 箭头函数的this在定义的时候继承自外层第一个普通函数的this。
- 如果箭头函数外层没有普通函数，严格模式和非严格模式下它的this都会指向window(全局对象)
- 箭头函数本身的this指向不能改变，但可以修改它要继承的对象的this。
- 箭头函数的this指向全局，使用arguments会报未声明的错误。
- 箭头函数的this指向普通函数时,它的argumens继承于该普通函数
- 使用new调用箭头函数会报错，因为箭头函数没有constructor
- 箭头函数不支持new.target
- 箭头函数不支持重命名函数参数,普通函数的函数参数支持重命名
- 箭头函数相对于普通函数语法更简洁优雅


### js异步执行的运行机制

- 所有任务都在主线程上执行，形成一个执行栈。
- 主线程之外，还有一个“任务队列”。只要异步任务有了运行结果，就在“任务队列”值中放置一个事件
- 一旦“执行栈”中的所有同步任务执行完成，系统聚会去读取“任务队列”。那些对应的异步任务，结束等待状态，进入执行栈并开始执行
- 主线程不断重复上面的第三步

### 宏任务和微任务

    异步任务分为 宏任务 和 微任务， 不同的API注册的任务会依次进入自身对应的队列中，然后等待Event Loop 将它们依次压入执行栈中执行

#### 宏任务

    script（整体代码）、settimeout、setInterval、UI渲染、I/O、postMessage

#### 微任务

    Promise Ajax async

### Event Loop（事件循环）

Event Loop中，每一次循环称为 tick，每次tick的任务如下：

- 执行栈选择最先进入队列的宏任务（通常是script整体代码），如果有则执行
- 检查是否存在微任务，如果存在则不停执行，直至清空微任务队列
- 更新 render （每一次时间循环，浏览器都可能会去更新渲染）
- 重复以上步骤

> 宏任务 > 所有微任务 > 宏任务

- 所有任务看成两个队列：执行队列与事件队列。
- 执行队列是同步的，事件队列是异步的，宏任务放入事件列表，微任务放入执行队列之后，事件队列之前。
- 当执行完同步代码之后，就会执行位于执行列表之后的微任务，然后再执行事件列表中的宏任务


### web sendBeacon 刷新/关闭页面之前发送请求

